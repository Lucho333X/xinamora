<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>XINA MORA | 2026 | SYSTEM V2.0</title>
    
    <!-- Fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700;800&family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <!-- Iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- CORE VARIABLES --- */
        :root {
            --bg-color: #050505;
            --text-color: #f0f0f0;
            --accent-color: #FF0000; /* Rojo Puro */
            --accent-glow: 0 0 10px rgba(255, 0, 0, 0.8), 0 0 20px rgba(255, 0, 0, 0.4); /* Glow para hacerlo "más rojo" */
            --secondary-accent: #33ff33;
            --grid-line: #222;
            --font-head: 'Space Grotesk', sans-serif;
            --font-mono: 'Space Mono', monospace;
            --cursor-size: 20px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; cursor: none; }

        /* Ajustes Mobile */
        canvas { touch-action: none; user-select: none; -webkit-user-select: none; }
        html { scroll-behavior: smooth; }

        body {
            background-color: var(--bg-color); color: var(--text-color);
            font-family: var(--font-head); overflow-x: hidden; text-transform: uppercase;
        }

        /* --- BACKGROUND CANVAS (Cyber Rain) --- */
        #bgCanvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; opacity: 0.15; pointer-events: none;
        }

        /* --- ROTATE OVERLAY --- */
        #rotateOverlay {
            display: none; 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 20000; 
            flex-direction: column; justify-content: center; align-items: center;
            color: var(--accent-color); text-align: center; padding: 20px;
        }

        /* --- CUSTOM CURSOR --- */
        #cursor {
            position: fixed; top: 0; left: 0; width: var(--cursor-size); height: var(--cursor-size);
            border: 2px solid var(--accent-color); transform: translate(-50%, -50%) rotate(45deg);
            box-shadow: var(--accent-glow); /* Más brillo al cursor */
            pointer-events: none; z-index: 9999; transition: width 0.1s, height 0.1s;
            mix-blend-mode: difference;
        }
        #cursor.active { background: var(--accent-color); width: 10px; height: 10px; }
        
        @media (hover: none) and (pointer: coarse) {
            #cursor { display: none; }
            * { cursor: auto !important; }
        }
        
        /* --- BACKGROUND FX --- */
        .noise-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;
            background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAUVBMVEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYV/hXchAAAAHXRSTlMA+++++++++g+++++++O++++++f++++++U+++++f62T+fAAAAHlJREFUeNrtwQEBAAAAgqD+r2zHBxQAAAAAAAAAAAAAAIB3BuG1AAG35GzgAAAAAElFTkSuQmCC') repeat;
            opacity: 0.05; z-index: 900;
        }

        /* --- TICKER --- */
        .ticker-wrap {
            width: 100%; overflow: hidden; background-color: var(--accent-color);
            color: #000; border-bottom: 1px solid var(--grid-line);
            box-shadow: 0 0 15px rgba(255,0,0,0.5); /* Glow en la barra roja */
        }
        .ticker {
            display: inline-block; white-space: nowrap; padding: 10px 0;
            animation: ticker 25s linear infinite; font-family: var(--font-mono);
            font-weight: 700; font-size: 1.2rem;
        }
        .ticker__item { padding: 0 2rem; }
        @keyframes ticker { 0% { transform: translate3d(0, 0, 0); } 100% { transform: translate3d(-100%, 0, 0); } }

        /* --- HEADER (GLASS EFFECT TOTAL) --- */
        header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 20px 40px; 
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            position: sticky; top: 0; 
            background: rgba(0, 0, 0, 0.01); /* Prácticamente invisible */
            backdrop-filter: blur(10px); /* Solo desenfoque */
            -webkit-backdrop-filter: blur(10px);
            z-index: 100;
            transition: background 0.3s;
        }
        /* Opcional: Si quieres que se oscurezca un pelín al bajar, se hace con JS, pero pediste transparente directo */
        
        .logo-container img { 
            height: 55px; width: auto; display: block; 
        }
        .nav-links { display: flex; gap: 40px; font-family: var(--font-mono); font-size: 0.85rem; font-weight: bold; }
        .nav-links li { transition: 0.2s; text-shadow: 0 0 5px rgba(0,0,0,0.5); }
        .nav-links li:hover { color: var(--accent-color); text-shadow: var(--accent-glow); }

        /* --- CONTROLS --- */
        .controls-panel {
            position: fixed; bottom: 30px; right: 30px; z-index: 800;
            display: flex; flex-direction: column; gap: 10px; align-items: flex-end;
        }
        .control-btn {
            background: rgba(0,0,0,0.8); border: 1px solid #333; color: #fff;
            padding: 10px 15px; font-family: var(--font-mono); font-size: 0.8rem;
            transition: 0.2s; display: flex; align-items: center; gap: 10px;
        }
        .control-btn:hover { border-color: var(--accent-color); color: var(--accent-color); box-shadow: var(--accent-glow); }
        .audio-group { display: flex; gap: 5px; background: #000; padding: 5px; border: 1px solid #333; }
        .active-music { background-color: var(--accent-color) !important; color: #000 !important; border-color: var(--accent-color) !important; box-shadow: var(--accent-glow); }

        /* --- NEW COVER SECTION (PAGE 1) --- */
        .cover-section {
            width: 100%;
            height: 90vh; /* Ocupa casi toda la pantalla */
            border-bottom: 1px solid var(--grid-line);
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .cover-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center 30%; 
            display: block;
        }

        /* --- REDESIGNED HERO / XINA MORA SECTION (PAGE 2) --- */
        .hero { 
            padding: 100px 40px; 
            min-height: auto;
            border-bottom: 1px solid var(--grid-line); 
            position: relative; 
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Contenedor "Tarjeta Profesional" */
        .profile-card {
            width: 100%;
            max-width: 900px;
            border: 1px solid #333;
            background: rgba(10, 10, 10, 0.6);
            backdrop-filter: blur(5px);
            padding: 60px;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        /* Decoraciones de esquina */
        .corner-deco {
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid var(--accent-color);
            transition: 0.3s;
        }
        .tl { top: -1px; left: -1px; border-right: none; border-bottom: none; }
        .tr { top: -1px; right: -1px; border-left: none; border-bottom: none; }
        .bl { bottom: -1px; left: -1px; border-right: none; border-top: none; }
        .br { bottom: -1px; right: -1px; border-left: none; border-top: none; }
        
        .profile-card:hover .corner-deco {
            width: 30px; height: 30px;
            box-shadow: var(--accent-glow);
        }

        .sys-info {
            position: absolute;
            top: 20px;
            right: 20px;
            font-family: var(--font-mono);
            font-size: 0.7rem;
            color: #666;
            letter-spacing: 2px;
        }

        .hero h1 {
            font-size: clamp(3.5rem, 8vw, 8rem); line-height: 0.9; font-weight: 800;
            letter-spacing: -3px; margin-bottom: 20px; text-transform: uppercase;
            position: relative;
            z-index: 2;
        }
        
        /* EFECTO GLITCH LIMPIO */
        .glitch-text { 
            display: inline-block; 
            transition: 0.1s; 
            position: relative; 
            will-change: transform, color; 
            transform: translate3d(0,0,0);
        }
        .hero:hover .glitch-text { 
            color: var(--accent-color); 
            transform: skewX(-10deg) translateX(5px);
            text-shadow: var(--accent-glow); /* Glow rojo intenso */
        }

        .hero p {
            font-family: var(--font-mono);
            color: #ccc;
            max-width: 600px;
            margin-bottom: 40px;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .cta-btn {
            padding: 15px 50px; background: transparent; border: 1px solid var(--text-color);
            color: var(--text-color); font-family: var(--font-mono); font-weight: 700;
            font-size: 1rem; position: relative; overflow: hidden; transition: 0.3s;
            width: fit-content;
            letter-spacing: 1px;
        }
        .cta-btn::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: var(--accent-color); transition: 0.4s; z-index: -1;
        }
        .cta-btn:hover::before { left: 0; }
        .cta-btn:hover { border-color: var(--accent-color); color: black; box-shadow: var(--accent-glow); }
        .cta-btn:disabled { opacity: 0.5; cursor: not-allowed; }

        /* --- NEWSLETTER INLINE (Rediseñado) --- */
        .inline-newsletter {
            margin-top: 50px;
            width: 100%;
            border-top: 1px solid #222;
            padding-top: 30px;
        }
        .inline-newsletter h3 {
            font-family: var(--font-mono);
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 20px;
            color: var(--accent-color);
            letter-spacing: 2px;
        }
        .inline-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 400px;
            margin: 0 auto;
        }
        .inline-input {
            background: rgba(0,0,0,0.5);
            border: 1px solid #333;
            padding: 15px;
            color: #fff;
            font-family: var(--font-mono);
            font-size: 0.85rem;
            transition: 0.3s;
            text-align: center;
        }
        .inline-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: inset 0 0 10px rgba(255,0,0,0.1);
        }

        /* --- BIG LOGO SECTION --- */
        .big-logo-section {
            padding: 30px 0 60px 0; 
            border-bottom: 1px solid var(--grid-line);
            display: flex; justify-content: center; align-items: center; background: #000;
        }
        .big-logo-section a { display: block; width: 100%; text-align: center; }
        .big-logo-section img {
            max-width: 90%; width: 800px; height: auto; filter: grayscale(100%); transition: 0.3s;
        }
        .big-logo-section:hover img {
            filter: grayscale(0%); drop-shadow(var(--accent-glow));
        }

        /* --- FOOTER --- */
        footer {
            padding: 80px 40px; display: flex; flex-direction: column; justify-content: center;
            align-items: center; font-family: var(--font-mono); color: #666; font-size: 0.8rem;
            gap: 30px; text-align: center;
        }
        .footer-text { display: flex; flex-direction: column; gap: 10px; }
        .social-links { display: flex; gap: 30px; font-size: 1.8rem; }
        .social-links a { color: var(--accent-color); transition: 0.3s; }
        .social-links a:hover { color: #fff; text-shadow: var(--accent-glow); transform: scale(1.1); }

        /* --- MODALS --- */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.96); z-index: 9998; justify-content: center;
            align-items: center; flex-direction: column;
        }
        .newsletter-box {
            border: 2px solid var(--text-color); background: #000; padding: 40px;
            max-width: 500px; width: 90%; text-align: center; position: relative;
            box-shadow: var(--accent-glow); pointer-events: auto; 
        }
        .newsletter-input {
            width: 100%; padding: 15px; background: #111; border: 1px solid #333;
            color: white; font-family: var(--font-mono); margin: 20px 0; text-align: center;
        }
        .newsletter-input:focus { border-color: var(--accent-color); outline: none; }

        /* GAME UI & WRAPPER */
        .game-wrapper {
            position: relative; border: 2px solid var(--accent-color);
            box-shadow: 0 0 50px rgba(255, 0, 0, 0.2);
            max-width: 100%;
            width: 800px;
        }
        canvas.game-cv { display: block; background: #050505; cursor: crosshair; width: 100%; height: auto; }
        
        .ui-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        
        .close-modal { position: absolute; top: -40px; right: 0; font-family: var(--font-mono); color: #fff; cursor: none; font-size: 1rem; pointer-events: auto;}
        .close-modal:hover { color: var(--accent-color); }
        
        .in-game-mute {
            position: absolute; top: 20px; right: 20px; pointer-events: auto;
            background: #333; border: 1px solid #555; color: #888;
            padding: 8px 15px; font-family: var(--font-mono); font-size: 0.8rem;
            z-index: 10002; transition: 0.3s;
        }
        .in-game-mute.active {
            background: var(--accent-color); border-color: var(--accent-color); color: #000; font-weight: bold;
        }

        /* --- HUD (DESKTOP) --- */
        #scoreHud {
            position: absolute; top: 20px; left: 20px; font-family: var(--font-mono);
            color: white; font-size: 1.2rem; display: none; text-shadow: 0 0 5px rgba(0,0,0,0.8);
            z-index: 100;
            background: rgba(0,0,0,0.5); padding: 5px 10px; border-radius: 4px; 
        }
        
        #livesHud {
            position: absolute; bottom: 20px; left: 20px; font-family: var(--font-mono);
            color: var(--accent-color); font-size: 1rem; display: none; z-index: 100;
            background: rgba(0,0,0,0.5); padding: 5px 10px; border-radius: 4px;
        }
        
        #mobileControlsHint {
            position: absolute; bottom: 20px; width: 100%; text-align: center;
            font-family: var(--font-mono); color: rgba(255,255,255,0.4); font-size: 0.7rem;
            pointer-events: none; display: none;
        }

        @media(max-width: 768px) {
            .hero { padding: 60px 20px; }
            .profile-card { padding: 30px 20px; }
            .hero h1 { font-size: 3rem; letter-spacing: -1px; }
            .nav-links { display: none; }
            .controls-panel { bottom: 10px; right: 10px; }
            
            /* FIX NEWSLETTER MOVIL: Más pequeña */
            .newsletter-box { width: 90%; padding: 25px; margin: 0 auto; }
            
            #mobileControlsHint { display: block; bottom: 10px; font-size: 0.65rem; }

            /* --- HUD MÓVIL --- */
            #scoreHud {
                top: 10px; left: 10px; font-size: 0.9rem; 
                text-shadow: 1px 1px 2px black;
                padding: 3px 8px;
            }
            #livesHud {
                bottom: auto; top: 10px; left: auto; right: 10px; 
                font-size: 0.8rem;
                padding: 3px 8px;
            }

            /* --- FIX GAME OVER MÓVIL (COMPACTO) --- */
            #gameOverScreen {
                width: 85% !important; /* Menos ancho */
                max-width: 350px;
                padding: 20px !important; /* Menos relleno */
            }
            #gameOverScreen h2 { font-size: 1.5rem; } /* Título más pequeño */
            #gameOverScreen p { font-size: 0.8rem; margin: 5px 0; }
            #gameOverScreen .cta-btn { 
                padding: 10px 20px; font-size: 0.9rem; margin-top: 10px;
            }
            #gameOverScreen .newsletter-input {
                padding: 10px; margin: 10px 0; font-size: 0.9rem;
            }

            /* --- FIX CORTE PANTALLA MÓVIL (FULLSCREEN REAL) --- */
            #gameModal {
                padding: 0 !important;
                justify-content: center;
                background: #000 !important;
            }
            
            .game-wrapper { 
                width: 100vw !important; 
                height: 100vh !important; 
                max-width: none !important;
                border: none !important; 
                border-radius: 0 !important;
                display: flex;
                align-items: center;
                justify-content: center;
                background: #000;
                position: fixed; /* Fija la posición para evitar scroll */
                top: 0;
                left: 0;
            }
            
            canvas.game-cv {
                width: 100%;
                height: 100%;
                object-fit: cover; 
            }

            /* Botón de salir flotante en móvil */
            .close-modal {
                position: fixed;
                top: 10px;
                right: 50%;
                transform: translateX(50%);
                background: rgba(0,0,0,0.7);
                padding: 5px 10px;
                border: 1px solid #333;
                z-index: 10003;
                border-radius: 20px;
            }

            /* Botón Mute Móvil */
            .in-game-mute {
                top: auto !important; 
                bottom: 30px !important; 
                right: 20px !important; 
                background: rgba(0,0,0,0.7);
                z-index: 10004;
                border-radius: 20px;
            }
        }
    </style>
</head>
<body>

    <div id="cursor"></div>
    <div class="noise-overlay"></div>
    <!-- NEW: Matrix-like rain effect -->
    <canvas id="bgCanvas"></canvas>

    <!-- ROTATE OVERLAY -->
    <div id="rotateOverlay">
        <i class="fas fa-rotate" style="font-size: 4rem; margin-bottom: 20px;"></i>
        <h2 style="font-size: 1.5rem;">GIRA TU TELÉFONO</h2>
        <p style="font-family: var(--font-mono); margin-top: 10px;">GIRA LA PANTALLA PARA INICIAR LA MISIÓN.</p>
    </div>

    <!-- CONTROLES -->
    <div class="controls-panel">
        <div class="audio-group">
            <button class="control-btn hover-target" onclick="toggleMusic()" id="playBtn">
                <i class="fas fa-play"></i>
            </button>
            <button class="control-btn hover-target" onclick="changeTrack()">
                <i class="fas fa-forward"></i>
            </button>
            <div class="control-btn" style="border:none; color:#888;" id="trackDisplay">TRACK 1</div>
        </div>
    </div>

    <!-- MARQUESINA ACTUALIZADA -->
    <div class="ticker-wrap">
        <div class="ticker">
            <span class="ticker__item">XINA MORA 2026</span>
            <span class="ticker__item">TECHNO EXPERIENCE</span>
            <span class="ticker__item">LA SEÑAL</span>
            <span class="ticker__item">444 - 555 - 999 - 111</span>
            <span class="ticker__item">/// SYSTEM ONLINE V.2.0.2.6</span>
        </div>
    </div>

    <header>
        <div class="logo-container hover-target">
            <!-- LOGO HEADER -->
            <img src="logo.png" alt="XINA MORA" onerror="this.style.display='none'; this.parentNode.innerText='XINA MORA';">
        </div>
        <ul class="nav-links">
            <li class="hover-target" onclick="window.open('https://www.youtube.com/@XinaMora', '_blank')">VISUAL</li>
            <li class="hover-target" onclick="window.open('https://open.spotify.com/intl-es/artist/4dRPdWRUFyJp0yhjGBLClx', '_blank')">MÚSICA</li>
            <li class="hover-target" onclick="openGame()">JUEGO</li>
            <li class="hover-target" onclick="window.open('https://shop.xinamora.com', '_blank')">MERCH</li>
        </ul>
    </header>

    <!-- SECCIÓN 1: PORTADA GIGANTE -->
    <section class="cover-section">
        <img src="xinamora_1.png" alt="XINA MORA COVER" class="cover-image" loading="eager" fetchpriority="high" onerror="this.src='https://placehold.co/1920x1080/111/red?text=XINA+MORA+COVER'">
    </section>

    <!-- SECCIÓN 2: PERFIL PROFESIONAL Y FORMULARIO -->
    <section class="hero">
        <div class="profile-card">
            <!-- Decoraciones esquinas -->
            <div class="corner-deco tl"></div>
            <div class="corner-deco tr"></div>
            <div class="corner-deco bl"></div>
            <div class="corner-deco br"></div>
            <div class="sys-info">ID: XM-2026 // STATUS: LIVE</div>

            <h1>
                <span class="glitch-text" data-text="XINA MORA">XINA MORA</span>
            </h1>
            <p>
                LA SEÑAL SE HA EXPANDIDO. UNA EXPERIENCIA TECHNO INDUSTRIAL SIN PRECEDENTES.
                NUEVA ERA. NUEVO SONIDO. ÚNETE A LA TRANSMISIÓN.
            </p>
            <button class="cta-btn hover-target" onclick="openGame()">
                [ INICIAR MISIÓN: 2026 ]
            </button>

            <!-- FORMULARIO ÚNETE A LA SEÑAL (FORMSUBMIT.CO) -->
            <div class="inline-newsletter">
                <h3>ÚNETE A LA SEÑAL</h3>
                <!-- ¡¡¡ IMPORTANTE: CAMBIA "contact@xinamora.com" POR TU EMAIL REAL !!! -->
                <form id="inlineNewsletterForm" action="https://formsubmit.co/contact@xinamora.com" method="POST" class="inline-form">
                    <input type="hidden" name="_captcha" value="false">
                    <input type="hidden" name="_subject" value="Nueva Suscripción: La Señal">
                    
                    <input type="text" name="name" class="inline-input hover-target" placeholder="NOMBRE" required>
                    <input type="email" name="email" class="inline-input hover-target" placeholder="CORREO ELECTRÓNICO" required>
                    <button type="submit" id="inlineSubmitBtn" class="cta-btn hover-target" style="width: 100%; margin-top: 10px;">ENVIAR</button>
                </form>
                <!-- Mensaje de estado -->
                <p id="inlineFormStatus" style="font-family: var(--font-mono); margin-top: 15px; min-height: 1.5rem;"></p>
            </div>
        </div>
    </section>

    <div class="big-logo-section hover-target">
        <a href="https://www.xinamora.com" target="_blank" class="hover-target">
             <img src="logo.png" alt="XINA MORA LOGO" onerror="this.style.display='none'; this.parentNode.innerHTML='<h2 style=\'font-size:4rem; color:#222\'>XINA MORA</h2>'">
        </a>
    </div>

    <footer>
        <div class="footer-text">
            <span>© 2026 XINA MORA ENTERTAINMENT</span>
            <span>DISEÑADO PARA EL FUTURO</span>
        </div>
        <div class="social-links">
            <a href="https://www.instagram.com/laxinamora/?hl=es" target="_blank" class="hover-target"><i class="fab fa-instagram"></i></a>
            <a href="https://www.tiktok.com/@laxinamora?lang=es" target="_blank" class="hover-target"><i class="fab fa-tiktok"></i></a>
            <a href="https://www.youtube.com/@XinaMora" target="_blank" class="hover-target"><i class="fab fa-youtube"></i></a>
            <a href="https://open.spotify.com/intl-es/artist/4dRPdWRUFyJp0yhjGBLClx" target="_blank" class="hover-target"><i class="fab fa-spotify"></i></a>
        </div>
    </footer>

    <!-- MODAL JUEGO -->
    <div id="gameModal" class="modal-overlay">
        <div class="game-wrapper">
            <div class="close-modal hover-target" onclick="closeGame()">✕ SALIR</div>
            
            <button class="in-game-mute hover-target" onclick="toggleMusic()" id="inGameMuteBtn">
                <i class="fas fa-volume-mute"></i> MUSIC: OFF
            </button>

            <canvas id="gameCanvas" class="game-cv" width="800" height="500"></canvas>
            
            <div id="scoreHud"></div>
            <div id="livesHud"></div>
            <!-- INSTRUCCIONES ACTUALIZADAS -->
            <div id="mobileControlsHint">IZQUIERDA: MOVER NAVES /// DERECHA: DISPARAR</div>

            <div id="uiLayer" class="ui-layer">
                <!-- Game Over -->
                <div id="gameOverScreen" class="newsletter-box" style="display:none; border-color:var(--accent-color);">
                    <h2 style="color: var(--accent-color); text-shadow: var(--accent-glow);">HAS MUERTO</h2>
                    <p style="margin: 10px 0; font-family: var(--font-mono);">LA SEÑAL SE HA PERDIDO.</p>
                    <p style="font-size: 0.8rem; color:#666; margin-bottom: 20px;">ENVÍA INFORME DE ERROR PARA SALIR.</p>
                    
                    <!-- ¡¡¡ IMPORTANTE: CAMBIA "contact@xinamora.com" POR TU EMAIL REAL !!! -->
                    <form id="exitForm" action="https://formsubmit.co/contact@xinamora.com" method="POST">
                        <input type="hidden" name="_captcha" value="false">
                        <input type="hidden" name="_subject" value="Informe de Error: Juego Xina Mora">
                        <input type="hidden" name="Game_Score" id="hiddenScoreInput">

                        <input type="email" name="email" id="exitEmail" class="newsletter-input hover-target" placeholder="TU_EMAIL" required>
                        <button type="submit" id="sendExitBtn" class="cta-btn hover-target">ENVIAR LA SEÑAL</button>
                    </form>

                    <p id="exitStatus" style="font-family: var(--font-mono); font-size: 0.8rem; color: var(--secondary-accent); margin-top: 10px; min-height: 1.2em;"></p>
                    
                    <div style="margin-top: 20px;">
                        <span class="hover-target" onclick="startGame()" style="font-size: 0.8rem; text-decoration: underline; cursor: none; color: #fff;">REINTENTAR MISIÓN</span>
                    </div>
                </div>
            </div>
        </div>
        <div style="margin-top: 15px; font-family: var(--font-mono); color: #666; font-size: 0.8rem;" id="controlsText">
            /// SYSTEM READY 2026
        </div>
    </div>

    <script>
        // --- CORE FUNCTIONS ---
        // Se usa FormSubmit para AJAX
        
        // --- BACKGROUND FX: CYBER RAIN (OPTIMIZED) ---
        const bgCanvas = document.getElementById('bgCanvas');
        const bgCtx = bgCanvas.getContext('2d');
        let bgDrops = [];
        
        function resizeBg() {
            bgCanvas.width = window.innerWidth;
            bgCanvas.height = window.innerHeight;
            const columns = Math.floor(bgCanvas.width / 30);
            bgDrops = [];
            for(let i=0; i<columns; i++) bgDrops[i] = 1;
        }
        window.addEventListener('resize', resizeBg);
        resizeBg();

        function drawBg() {
            bgCtx.fillStyle = 'rgba(5, 5, 5, 0.1)'; 
            bgCtx.fillRect(0, 0, bgCanvas.width, bgCanvas.height);
            bgCtx.fillStyle = '#330000'; // Rojo muy oscuro para el fondo
            bgCtx.font = '20px "Space Mono"'; 
            
            for(let i=0; i<bgDrops.length; i++) {
                const text = String.fromCharCode(0x30A0 + Math.random() * 96);
                bgCtx.fillText(text, i*30, bgDrops[i]*30);
                if(bgDrops[i]*30 > bgCanvas.height && Math.random() > 0.975) bgDrops[i] = 0;
                bgDrops[i]++;
            }
            requestAnimationFrame(drawBg);
        }
        drawBg();


        // --- AUDIO ENGINE ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playTone(freq, type, duration, vol = 0.1) {
            if(audioCtx.state === 'suspended') audioCtx.resume().catch(e => console.log("Audio wait for interaction"));
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = type;
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            if(type === 'sawtooth') osc.frequency.exponentialRampToValueAtTime(freq * 0.1, audioCtx.currentTime + duration);
            gain.gain.setValueAtTime(vol, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + duration);
        }

        function sfxShoot() { playTone(800, 'sawtooth', 0.1, 0.05); }
        function sfxHit() { playTone(150, 'square', 0.2, 0.2); }
        function sfxExplosion() { playTone(100, 'square', 0.4, 0.3); playTone(50, 'sawtooth', 0.5, 0.3); }

        // --- MUSIC ---
        const tracks = [{ name: "TRACK 1", src: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" }];
        let audio = new Audio(tracks[0].src);
        audio.volume = 0.6; audio.loop = true;

        function updateMusicUI(isPlaying) {
            const mainBtn = document.getElementById('playBtn');
            const gameBtn = document.getElementById('inGameMuteBtn');
            if(isPlaying) {
                mainBtn.classList.add('active-music'); mainBtn.innerHTML = '<i class="fas fa-pause"></i>';
                gameBtn.classList.add('active'); gameBtn.innerHTML = '<i class="fas fa-volume-up"></i> MUSIC: ON';
            } else {
                mainBtn.classList.remove('active-music'); mainBtn.innerHTML = '<i class="fas fa-play"></i>';
                gameBtn.classList.remove('active'); gameBtn.innerHTML = '<i class="fas fa-volume-mute"></i> MUSIC: OFF';
            }
        }
        function toggleMusic() {
            if(audioCtx.state === 'suspended') audioCtx.resume();
            if(audio.paused) { audio.play(); updateMusicUI(true); } 
            else { audio.pause(); updateMusicUI(false); }
        }
        function changeTrack() { audio.currentTime = 0; if(audio.paused) toggleMusic(); }

        // --- GENERIC AJAX SUBMIT FOR FORMSUBMIT.CO ---
        async function submitFormAjax(event, btnId, statusId, successMsg) {
            event.preventDefault();
            const form = event.target;
            const btn = document.getElementById(btnId);
            const status = document.getElementById(statusId);
            
            // Check email placeholder
            const actionUrl = form.action;
            if(actionUrl.includes('TU_EMAIL_AQUI')) {
                status.innerHTML = "ERROR: CONFIGURA EL EMAIL EN EL CÓDIGO.";
                status.style.color = "red";
                return;
            }

            const originalBtnText = btn.innerText;
            btn.disabled = true; 
            btn.innerText = "ENVIANDO...";
            status.innerHTML = "";

            try {
                // FormSubmit accept POST with JSON if proper headers
                const formData = new FormData(form);
                const response = await fetch(actionUrl, {
                    method: "POST",
                    body: formData,
                    headers: { 
                        'Accept': 'application/json' 
                    }
                });
                
                if (response.ok) {
                    status.innerHTML = successMsg; 
                    status.style.color = "#33ff33"; // Verde neon
                    form.reset();
                    
                    // Si es el juego, cerrar modal tras unos segundos
                    if(btnId === 'sendExitBtn') {
                        setTimeout(() => { closeGame(); status.innerHTML = ""; }, 2000);
                    }
                } else { 
                    status.innerHTML = "ERROR EN LA TRANSMISIÓN."; 
                    status.style.color = "red"; 
                }
            } catch (error) { 
                console.error(error);
                status.innerHTML = "ERROR DE CONEXIÓN."; 
                status.style.color = "red"; 
            } finally { 
                btn.disabled = false; 
                btn.innerText = originalBtnText; 
            }
        }

        // --- CURSOR ---
        const cursor = document.getElementById('cursor');
        document.addEventListener('mousemove', (e) => { cursor.style.left = e.clientX + 'px'; cursor.style.top = e.clientY + 'px'; });
        document.querySelectorAll('.hover-target').forEach(el => {
            el.addEventListener('mouseenter', () => { cursor.classList.add('active'); document.body.style.cursor = 'none'; });
            el.addEventListener('mouseleave', () => cursor.classList.remove('active'));
        });

        window.addEventListener('load', () => {
            // Setup Forms
            const exitForm = document.getElementById('exitForm');
            if (exitForm) {
                exitForm.addEventListener('submit', (e) => {
                    document.getElementById('hiddenScoreInput').value = `Score: ${score}`;
                    submitFormAjax(e, 'sendExitBtn', 'exitStatus', 'SEÑAL VERIFICADA.');
                });
            }
            
            const inlineForm = document.getElementById('inlineNewsletterForm');
            if (inlineForm) {
                inlineForm.addEventListener('submit', (e) => {
                    submitFormAjax(e, 'inlineSubmitBtn', 'inlineFormStatus', 'SEÑAL ENVIADA CON ÉXITO.');
                });
            }
        });

        // ==========================================
        // === GAME ENGINE V17: POLISHED ===
        // ==========================================
        const modal = document.getElementById('gameModal');
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const rotateOverlay = document.getElementById('rotateOverlay');
        const gameWrapper = document.querySelector('.game-wrapper');
        
        let gameLoopId = null;
        let gameActive = false;
        let gameRequested = false; 
        let score = 0;
        let shake = 0;
        let hitFlash = 0;
        
        const keys = {};
        let touchInput = { active: false, y: 250, fire: false };
        let player = { x: 50, y: 250, spd: 5, cd: 0, hp: 3, maxHp: 3 };

        document.addEventListener('keydown', e => { 
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
            keys[e.code] = true; 
            if(e.code==='Space'||e.code.startsWith('Arrow')) e.preventDefault(); 
        });
        document.addEventListener('keyup', e => delete keys[e.code]);
        
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            if(audioCtx.state === 'suspended') { audioCtx.resume().then(() => console.log("Audio Resumed")); }
            touchInput.active = true;
            updateTouch(e.touches);
        }, {passive: false});
        
        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            updateTouch(e.touches);
        }, {passive: false});
        
        canvas.addEventListener('touchend', (e) => {
            e.preventDefault();
            if(e.touches.length === 0) {
                touchInput.active = false;
                touchInput.fire = false;
            } else {
                updateTouch(e.touches);
            }
        });

        function updateTouch(touches) {
            touchInput.fire = false;
            for(let i=0; i<touches.length; i++) {
                const t = touches[i];
                const rect = canvas.getBoundingClientRect();
                const tX = (t.clientX - rect.left) * (canvas.width / rect.width);
                const tY = (t.clientY - rect.top) * (canvas.height / rect.height);
                if(tX > canvas.width / 2) touchInput.fire = true;
                else touchInput.y = tY;
            }
        }

        function resizeCanvasForMobile() {
            if (window.innerWidth < 900) {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            } else {
                canvas.width = 800;
                canvas.height = 500;
            }
        }

        function checkGameOrientation() {
            if (gameRequested) {
                if (window.innerWidth < 900 && window.innerHeight > window.innerWidth) {
                    rotateOverlay.style.display = 'flex'; 
                    modal.style.display = 'none'; 
                    if (gameActive) { gameActive = false; if(gameLoopId) cancelAnimationFrame(gameLoopId); }
                } else {
                    rotateOverlay.style.display = 'none'; 
                    modal.style.display = 'flex'; 
                    if (window.innerWidth < 900) resizeCanvasForMobile(); 
                    if (!gameActive) startGame();
                }
            } else {
                rotateOverlay.style.display = 'none';
            }
        }

        window.addEventListener('resize', () => {
            if(gameActive && window.innerWidth < 900) resizeCanvasForMobile();
            checkGameOrientation();
        });

        function openGame() {
            if(audioCtx.state === 'suspended') { audioCtx.resume().then(() => console.log("Audio Resumed on Button Click")); }
            gameRequested = true; 
            document.body.style.overflow = 'hidden';
            checkGameOrientation(); 
        }

        function closeGame() {
            gameRequested = false;
            modal.style.display = 'none';
            rotateOverlay.style.display = 'none';
            document.body.style.overflow = 'auto';
            gameActive = false;
            if(gameLoopId) cancelAnimationFrame(gameLoopId);
            gameLoopId = null;
            document.getElementById('gameOverScreen').style.display = 'none';
            document.getElementById('scoreHud').style.display = 'none';
            document.getElementById('livesHud').style.display = 'none';
        }

        let entities = [];
        let particles = [];
        let stars = [];
        let bgTexts = []; 
        const bgStrings = ["XINA MORA", "2026", "TECHNO", "SIGNAL", "FUTURE", "ACID", "RE: NACER"];

        function initStars() {
            stars = [];
            bgTexts = [];
            for(let i=0; i<100; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 2 + 0.5,
                    spd: Math.random() * 3 + 0.5,
                    alpha: Math.random()
                });
            }
            spawnBgText();
        }

        function spawnBgText() {
            bgTexts.push({
                x: canvas.width + 100,
                y: Math.random() * (canvas.height - 100) + 50,
                text: bgStrings[Math.floor(Math.random() * bgStrings.length)],
                spd: 2,
                size: Math.random() * 40 + 40
            });
        }

        function startGame() {
            gameActive = false;
            if(gameLoopId) cancelAnimationFrame(gameLoopId);
            resizeCanvasForMobile(); 
            touchInput = { active: false, y: canvas.height/2, fire: false };
            score = 0;
            shake = 0;
            hitFlash = 0;
            player = { x: 50, y: canvas.height/2, w: 30, h: 20, spd: 8, cd: 0, hp: 3, maxHp: 3 }; 
            entities = [];
            particles = [];
            initStars();
            document.getElementById('gameOverScreen').style.display = 'none';
            document.getElementById('uiLayer').style.pointerEvents = 'none';
            document.getElementById('scoreHud').style.display = 'block';
            document.getElementById('livesHud').style.display = 'block';
            gameActive = true;
            gameLoopId = requestAnimationFrame(gameLoop);
        }

        function gameOver() {
            gameActive = false;
            sfxExplosion();
            document.getElementById('uiLayer').style.pointerEvents = 'auto';
            document.getElementById('gameOverScreen').style.display = 'block';
        }

        function spawnExplosion(x, y, color) {
            for(let i=0; i<15; i++) {
                particles.push({
                    x, y,
                    vx: (Math.random()-0.5)*10, vy: (Math.random()-0.5)*10,
                    life: 1.0, color, size: Math.random()*3+1
                });
            }
        }

        function drawPolygon(ctx, x, y, radius, sides, color, rotation=0) {
            ctx.beginPath();
            for (let i = 0; i < sides; i++) {
                const angle = rotation + (i * 2 * Math.PI / sides);
                ctx.lineTo(x + radius * Math.cos(angle), y + radius * Math.sin(angle));
            }
            ctx.closePath();
            ctx.fillStyle = color;
            ctx.shadowBlur = 10;
            ctx.shadowColor = color;
            ctx.fill();
            ctx.shadowBlur = 0;
        }

        function gameLoop() {
            if(!gameActive) return;
            ctx.fillStyle = '#050505';
            ctx.save();
            if(shake > 0) {
                const dx = (Math.random()-0.5)*shake;
                const dy = (Math.random()-0.5)*shake;
                ctx.translate(dx, dy);
                shake *= 0.9;
                if(shake < 0.5) shake = 0;
            }
            ctx.fillRect(0,0, canvas.width, canvas.height);
            ctx.fillStyle = '#fff';
            stars.forEach(s => {
                s.x -= s.spd;
                if(s.x < 0) s.x = canvas.width;
                ctx.globalAlpha = s.alpha;
                ctx.fillRect(s.x, s.y, s.size, s.size);
            });
            if(Math.random() < 0.005) spawnBgText();
            bgTexts.forEach((t, i) => {
                t.x -= t.spd;
                ctx.fillStyle = '#333';
                ctx.font = `900 ${t.size}px "Space Mono"`;
                ctx.globalAlpha = 0.15;
                ctx.fillText(t.text, t.x, t.y);
                if(t.x < -500) bgTexts.splice(i, 1);
            });
            ctx.globalAlpha = 1;
            document.getElementById('scoreHud').innerText = `SCORE: ${score}`;
            document.getElementById('livesHud').innerHTML = `INTEGRITY: ${'█'.repeat(player.hp)}<span style="opacity:0.3">${'█'.repeat(player.maxHp - player.hp)}</span>`;
            
            if (touchInput.active) {
                const dy = touchInput.y - player.y;
                if (Math.abs(dy) > 5) player.y += dy * 0.15;
            } else {
                if(keys['ArrowUp']) player.y -= player.spd;
                if(keys['ArrowDown']) player.y += player.spd;
            }
            player.y = Math.max(20, Math.min(canvas.height-20, player.y));
            ctx.save();
            ctx.translate(player.x, player.y);
            if(Math.random() > 0.5) {
                particles.push({
                    x: player.x - 10, y: player.y + (Math.random()-0.5)*5,
                    vx: -4, vy: 0, life: 0.5, color: 'cyan', size: 2
                });
            }
            if(hitFlash > 0) {
                ctx.globalCompositeOperation = 'source-over';
                ctx.fillStyle = `rgba(255, 0, 0, ${hitFlash})`;
                hitFlash -= 0.1;
            } else { ctx.fillStyle = '#000'; }
            ctx.strokeStyle = 'cyan';
            ctx.lineWidth = 2;
            ctx.shadowBlur = 15;
            ctx.shadowColor = 'cyan';
            ctx.beginPath();
            ctx.moveTo(20, 0);
            ctx.lineTo(-15, -10);
            ctx.lineTo(-10, 0);
            ctx.lineTo(-15, 10);
            ctx.closePath();
            ctx.stroke();
            if(hitFlash > 0) ctx.fill();
            ctx.restore();

            if(player.cd > 0) player.cd--;
            if((keys['Space'] || touchInput.fire) && player.cd <= 0) {
                entities.push({ type: 'bullet', x: player.x+20, y: player.y, w: 15, h: 3, vx: 12, color: '#33ff33' });
                sfxShoot();
                player.cd = 8;
            }
            if(Math.random() < 0.02 + (score/10000)) {
                entities.push({ 
                    type: 'enemy', x: canvas.width + 50, y: Math.random()*(canvas.height-40)+20, 
                    radius: 15, vx: -(4 + Math.random()*4), color: '#ff3333'
                });
            }
            for(let i = entities.length-1; i>=0; i--) {
                let e = entities[i];
                e.x += e.vx;
                if(e.type === 'bullet') {
                    ctx.fillStyle = e.color;
                    ctx.shadowBlur = 10; ctx.shadowColor = e.color;
                    ctx.fillRect(e.x, e.y-1, e.w, e.h);
                    ctx.shadowBlur = 0;
                    if(e.x > canvas.width) entities.splice(i, 1);
                } 
                else if(e.type === 'enemy') {
                    e.angle = (e.angle || 0) + 0.1;
                    drawPolygon(ctx, e.x, e.y, e.radius, 4, e.color, e.angle);
                    if(Math.hypot(e.x - player.x, e.y - player.y) < e.radius + 15) {
                        player.hp--;
                        entities.splice(i, 1);
                        shake = 20; hitFlash = 1.0; sfxHit();
                        spawnExplosion(player.x, player.y, 'red');
                        if(player.hp <= 0) gameOver();
                    }
                    else if(e.x < -50) entities.splice(i, 1);
                }
                if(e.type === 'bullet') {
                    for(let j=0; j<entities.length; j++) {
                        let t = entities[j];
                        if(t.type === 'enemy' && Math.hypot(e.x - t.x, e.y - t.y) < t.radius + 5) {
                            spawnExplosion(t.x, t.y, '#ffaa00');
                            sfxExplosion();
                            entities.splice(j, 1); entities.splice(i, 1);
                            score += 100;
                            break;
                        }
                    }
                }
            }
            particles.forEach((p, i) => {
                p.x += p.vx; p.y += p.vy; p.life -= 0.03;
                ctx.fillStyle = p.color;
                ctx.globalAlpha = p.life;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
                ctx.fill();
                if(p.life <= 0) particles.splice(i, 1);
            });
            ctx.globalAlpha = 1;
            ctx.restore();
            gameLoopId = requestAnimationFrame(gameLoop);
        }
    </script>
</body>
</html>




